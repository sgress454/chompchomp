var _ = require('lodash');
/**
 * Routes
 *
 * Sails uses a number of different strategies to route requests.
 * Here they are top-to-bottom, in order of precedence.
 *
 * For more information on routes, check out:
 * http://sailsjs.org/#documentation
 */



/**
 * (1) Core middleware
 *
 * Middleware included with `app.use` is run first, before the router
 */


/**
 * (2) Static routes
 *
 * This object routes static URLs to handler functions--
 * In most cases, these functions are actions inside of your controllers.
 * For convenience, you can also connect routes directly to views or external URLs.
 *
 */

module.exports.routes = {

  '/reloadRoutes': {controller:'router', action:'reload'}

};

/* START_BUILDER_ROUTES */
_.extend(module.exports.routes, {"get /login":{"id":"Display_View","middleware":"response.view","inputs":{"view":{"origin":"literal","value":"home/login.ejs"}},"exits":{}},"post /login":{"id":"Look_up_user","middleware":"data.findOne","inputs":{"model":{"origin":"literal","value":"player"},"criteria:username":{"origin":"param","key":"username"},"criteria:password":{"origin":"param","key":"password"}},"exits":{"notFound":{"id":"Redirect_to_login","middleware":"response.redirect","inputs":{"destination":{"origin":"literal","value":"/login"}},"exits":{}},"success":{"id":"Log_User_In","middleware":"data.remember","inputs":{"key:user":{"origin":"middleware_data","middleware":"Look_up_user"},"flash":{"origin":null}},"exits":{"success":{"id":"Redirect_to_games","middleware":"response.redirect","inputs":{"destination":{"origin":"literal","value":"/games"}},"exits":{}}}}}},"get /logout":{"id":"Log_Out","middleware":"auth.logout","inputs":null,"exits":{"success":{"id":"Redirect","middleware":"response.redirect","inputs":{"destination":{"origin":"literal","value":"/"}},"exits":{}}}},"get /games":{"middleware":"auth.check_login","id":"authorize_user_bundle__auth_check_login","exits":{"not_logged_in":{"middleware":"response.redirect","id":"authorize_user_bundle__Redirect","inputs":{"destination":{"origin":"literal","value":"/login"}},"bundle_id":"authorize_user_bundle","exits":{}},"success":{"middleware":"data.find","id":"Find","inputs":{"model":{"origin":"literal","value":"game"},"where":{"origin":"json","value":"{\\\"endedOn\\\":null}"},"attributes":{"origin":null},"limit":{"origin":null},"sort":{"origin":null},"sort_asc":{"origin":null},"skip":{"origin":null}},"exits":{"success":{"id":"Display_View","middleware":"response.view","inputs":{"view":{"origin":"literal","value":"home/games.ejs"},"local:games":{"origin":"middleware_data","middleware":"Find"},"local:user":{"origin":"session","key":"user"},"local:errors":{"origin":"flash","key":"error"}},"exits":{}}},"outer":true}},"bundle_id":"authorize_user_bundle"},"post /signup":{"id":"Create","middleware":"data.createModel","inputs":{"model":{"origin":"literal","value":"player"},"data":{"origin":null},"model_property:name":{"origin":"param","key":"name"},"model_property:email":{"origin":"param","key":"email"},"model_property:password":{"origin":"param","key":"password"}},"exits":{"success":{"id":"Remember","middleware":"data.remember","inputs":{"key:user":{"origin":"middleware_data","middleware":"Create"},"flash":{"origin":"literal","value":false}},"exits":{"success":{"id":"Redirect","middleware":"response.redirect","inputs":{"destination":{"origin":"literal","value":"/games"}},"exits":{}}}}}},"get /signup":{"id":"Display_View","middleware":"response.view","inputs":{"view":{"origin":"literal","value":"home/signup.ejs"}},"exits":{}},"get /":{"middleware":"auth.check_login","id":"authorize_or_redirect__Check_Login_Status","exits":{"not_logged_in":{"middleware":"response.redirect","id":"authorize_or_redirect__Redirect","inputs":{"destination":{"origin":"literal","value":"/login"}},"bundle_id":"authorize_or_redirect","exits":{}},"success":{"middleware":"response.redirect","id":"Redirect_To_Games","inputs":{"destination":{"origin":"literal","value":"/games"}},"outer":true,"exits":{}}},"bundle_id":"authorize_or_redirect"},"get /game/:id/join":{"id":"Find_Game_In_Progress","middleware":"data.findOne","inputs":{"model":{"origin":"literal","value":"game"},"where":{"origin":"json","value":"{\\\"id\\\":\\\"=p(id)\\\", \\\"players.id\\\":\\\"=s(user.id)\\\"}"}},"exits":{"notFound":{"id":"Find_Joinable_Game","middleware":"data.findOne","inputs":{"model":{"origin":"literal","value":"game"},"where":{"origin":"json","value":"{\\\"id\\\":\\\"=p(id)\\\",\\\"players.id\\\":{\\\"$nin\\\":[\\\"=s(user.id)\\\"]}}"}},"exits":{"success":{"id":"Check_Game_Not_Full","middleware":"math.test","inputs":{"variable":{"origin":"json","value":"\\\"=count(m(Find_Joinable_Game.players))\\\""},"test":{"origin":"json","value":"2"}},"exits":{"success":{"id":"Remember_Game_Full_Error","middleware":"data.remember","inputs":{"flash":{"origin":"literal","value":true},"key:error":{"origin":"json","value":"Game Full"}},"exits":{"success":{"id":"Redirect","middleware":"response.redirect","inputs":{"destination":{"origin":"literal","value":"/games"}},"exits":{}}}},"fail":{"id":"Join_Game","middleware":"data.update","inputs":{"model":{"origin":"literal","value":"game"},"where":{"origin":"json","value":""},"update":{"origin":"json","value":"{\\\"$push\\\":{\\\"players\\\":{\\\"id\\\":\\\"=s(user.id)\\\",\\\"name\\\":\\\"=s(user.name)\\\"}}}"},"criteria:id":{"origin":"param","key":"id"}},"exits":{"success":{"id":"Remember_Game_ID_2","middleware":"data.remember","inputs":{"flash":{"origin":null},"key:currentGame":{"origin":"param","key":"id"}},"exits":{"success":{"id":"Redirect_To_Game_2","middleware":"response.redirect","inputs":{"destination":{"origin":"literal","value":"/play"}},"exits":{}}}}}}}}}},"success":{"id":"Remember_Game_ID","middleware":"data.remember","inputs":{"flash":{"origin":null},"key:currentGame":{"origin":"param","key":"id"}},"exits":{"success":{"id":"Redirect_To_Game","middleware":"response.redirect","inputs":{"destination":{"origin":"literal","value":"/play"}},"exits":{}}}}}},"get /play":{"middleware":"auth.check_login","id":"authorize_or_redirect__Check_Login_Status","exits":{"not_logged_in":{"middleware":"response.redirect","id":"authorize_or_redirect__Redirect","inputs":{"destination":{"origin":"literal","value":"/login"}},"bundle_id":"authorize_or_redirect","exits":{}},"success":{"middleware":"data.findOne","id":"Find_Game","inputs":{"model":{"origin":"literal","value":"game"},"where":{"origin":null},"criteria:id":{"origin":"session","key":"currentGame"}},"exits":{"success":{"id":"Display_View","middleware":"response.view","inputs":{"view":{"origin":"literal","value":"home/play.ejs"},"local:game":{"origin":"middleware_data","middleware":"Find_Game"},"local:user":{"origin":"session","key":"user"}},"exits":{}}},"outer":true}},"bundle_id":"authorize_or_redirect"},"get /game/new":{"middleware":"auth.check_login","id":"authorize_or_redirect__Check_Login_Status","exits":{"not_logged_in":{"middleware":"response.redirect","id":"authorize_or_redirect__Redirect","inputs":{"destination":{"origin":"literal","value":"/login"}},"bundle_id":"authorize_or_redirect","exits":{}},"success":{"middleware":"data.createModel","id":"Create","inputs":{"model":{"origin":"literal","value":"game"},"data":{"origin":"json","value":""}},"exits":{"success":{"id":"Create_String","middleware":"math.parseString","inputs":{"template":{"origin":"literal","value":"/game/[id]/join"},"substitution:id":{"origin":"middleware_data","middleware":"Create","key":"id"}},"exits":{"success":{"id":"Redirect","middleware":"response.redirect","inputs":{"destination":{"origin":"middleware_data","middleware":"Create_String"}},"exits":{}}}}},"outer":true}},"bundle_id":"authorize_or_redirect"},"get /game/:id/sjoin":{"id":"Find_Game_In_Progress","middleware":"data.findOne","inputs":{"model":{"origin":"literal","value":"game"},"where":{"origin":"json","value":"{\\\"id\\\":\\\"=p(id)\\\", \\\"players.id\\\":\\\"=s(user.id)\\\"}"}},"exits":{"notFound":{"id":"Find_Joinable_Game","middleware":"data.findOne","inputs":{"model":{"origin":"literal","value":"game"},"where":{"origin":"json","value":"{\\\"id\\\":\\\"=p(id)\\\",\\\"players.id\\\":{\\\"$nin\\\":[\\\"=s(user.id)\\\"]}}"}},"exits":{"success":{"id":"Check_Game_Not_Full","middleware":"math.test","inputs":{"variable":{"origin":"json","value":"\\\"=count(m(Find_Joinable_Game.players))\\\""},"test":{"origin":"json","value":"2"}},"exits":{"success":{"id":"Remember_Game_Full_Error","middleware":"data.remember","inputs":{"flash":{"origin":"literal","value":true},"key:error":{"origin":"json","value":"Game Full"}},"exits":{"success":{"id":"Output_JSON_2","middleware":"response.json","inputs":{"obj":{"origin":"literal","value":"{\\\"success\\\":false}"}},"exits":{}}}},"fail":{"id":"Join_Game","middleware":"data.update","inputs":{"model":{"origin":"literal","value":"game"},"where":{"origin":"json","value":""},"update":{"origin":"json","value":"{\\\"$push\\\":{\\\"players\\\":{\\\"id\\\":\\\"=s(user.id)\\\",\\\"name\\\":\\\"=s(user.name)\\\"}}}"},"criteria:id":{"origin":"param","key":"id"}},"exits":{"success":{"id":"Remember_Game_ID_2","middleware":"data.remember","inputs":{"flash":{"origin":null},"key:currentGame":{"origin":"param","key":"id"}},"exits":{"success":{"id":"Output_JSON_1","middleware":"response.json","inputs":{"obj":{"origin":"literal","value":"{\\\"success\\\":true}"}},"exits":{}}}}}}}}}},"success":{"id":"Remember_Game_ID","middleware":"data.remember","inputs":{"flash":{"origin":null},"key:currentGame":{"origin":"param","key":"id"}},"exits":{"success":{"id":"Output_JSON","middleware":"response.json","inputs":{"obj":{"origin":"literal","value":"{\\\"success\\\":true}"}},"exits":{}}}}}}});
/* END_BUILDER_ROUTES */

